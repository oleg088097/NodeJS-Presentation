<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/blood.css" id="theme">


		<link rel="stylesheet" href="css/index.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<img class="no-borders" src="images/logo.svg" onclick="RevealNotes.open()"></img>
				</section>
				<section>
					<h2>Node.js</h2>
					<blockquote cite="https://nodejs.org/en/">
						&ldquo;Node.js is a JavaScript runtime built on Chrome's V8 JavaScript engine&rdquo;
						<div class="text-right">
							<span class="text-right">nodejs.org</span>
						</div>
					</blockquote>
					<aside class="notes">
						Node is widely used by websites like Netflix, Airbnb, Twitter, PayPal, Walmart, Yahoo! and more.
						Node.js ranks as the fourth most important open source project
						https://foundation.nodejs.org/about
						https://nodejs.org/en/about/
					</aside>
				</section>
				<section>
					<h2>First of all</h2>
					<p>
						Node is JavaScript for servers
					</p>
				</section>
				<section data-state="chart_trend_iframe">
					<section>
						<h2>Why</h2>
						<p>
							So, why even bother when there is Java, C#, Python, Ruby e.t.c frameworks?
						</p>
					</section>
					<section>
						<iframe id="chart_trend" src="https://www.internetlivestats.com/total-number-of-websites/#chart_trend"  width="700" height="375"></iframe>
					</section>
					<aside class="notes">
						2009. So well known frameworks like Django, Ruby or Rails, ASP.NET, Spring and even larger number of different web servers, sevlet containers and other staff already provided the world with over 2 hundreds millions of websites. 

						https://nodejs.org/en/about/
					</aside>
				</section>
				<section>
					<section>
						<h2>Event loop</h2>
						<img class="no-borders" src="images/iwan_05-100755063-orig.png" width="80%" height="80%"> </img>

						<p><a href="https://nodejs.org/en/docs/guides/blocking-vs-non-blocking/">nodejs.org - Blocking vs. Non-Blocking</a></p>
						<aside class="notes">
							By the way in Java non blocking network interaction was added only in SE7 and that is 2011. 
							https://nodejs.org/en/about/
							Event-driven programming
							https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/
							(Or on Russian https://medium.com/devschacht/event-loop-timers-and-nexttick-18579cd122e0 )
							https://www.toptal.com/nodejs/why-the-hell-would-i-use-node-js

							All of this makes Node.js a great tool for hosting frontend content whereas all of hard work (calculations, heavy processing) is performed on more suitable platforms - Java, C#...
						</aside>
					</section>
					<section>
						<img class="no-borders" src="images/traditional.png" width="80%" height="80%"> </img>
					</section>
					<section>
						<img class="no-borders" src="images/node.png" width="80%" height="80%"> </img>
					</section>
				</section>
				<section>
					<h2>Hello World NodeJS http server</h2>
					<pre class="no-borders">
						<code data-trim data-noescape>
							const http = require('http');

							const hostname = '127.0.0.1';
							const port = 3000;

							const server = http.createServer((req, res) => {
							  res.statusCode = 200;
							  res.setHeader('Content-Type', 'text/plain');
							  res.end('Hello World\n');
							});

							server.listen(port, hostname, () => {
							  console.log(`Server running at http://${hostname}:${port}/`);
							});
						</code>
					</pre>
				</section>
				<section>
					<h2>Echo NodeJS server</h2>
					<pre class="no-borders" style="font-size: 0.5em !important;" >
						<code data-trim data-noescape style="max-height: none;">
							const http = require('http');
							const hostname = '127.0.0.1';
							const port = 3000;
							const server = http.createServer(function (request,response) {
							  let body = [];
							  request.on('error', (err) => {
							    console.error(err);
							  }).on('data', (chunk) => {
								  body.push(chunk);
							  }).on('end', () => {
							    body = Buffer.concat(body).toString();
							    response.on('error', (err) => {
							  	  console.error(err);
							    });
							    response.write(body);
							    response.end();
							  });
							});
							server.listen(port, hostname, () =>{
							  console.log(`Server running at http://${hostname}:${port}`);
							});
						</code>
					</pre>
				</section>
				<section>
					<h2>What is Node besides web server?</h2>
				</section>
				<section>
					<section>
						<h2>Module system</h2>
					</section>
					<section>
						<h3>ECMAScript 6</h3>
						<pre class="no-borders">
							<code data-trim data-noescape>	
								// File log.js
								const log = () => {
								  console.log('Example of ES module system');
								}
								export default log

								// File index.js
								import log from "./log"
								log();
							</code>
						</pre>
						<aside class="notes">
							That's the best way. Simple to use, looks pretty and habitually for your eyes. BUT it doesn't work. Well, it works, but only on narrow circle of browsers.
							https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/import
						</aside>
					</section>
					<section>
						<h3>Node CommonJS</h3>
						<pre class="no-borders">
							<code data-trim data-noescape>
								// File log.js
								function log(){
								  console.log('Example of CJS module system');
								}
								// expose log to other modules
								module.exports = { log }

								// File index.js
								var logModule = require('./log');
								logModule.log();
							</code>
						</pre>
						<aside class="notes">
							Not exactly "import" and "export" you expect, but works. Only on server side.
						</aside>
					</section>
					<section>
						<h3>Node Experimantal ECMAScript Modules</h3>
						<pre class="no-borders">
							<code data-trim data-noescape>
								// File log.mjs
								function log(){
									console.log("Example of Node ECMAScript Modules");
								}
								// expose log to other modules
								export default log;

								// File bar.mjs
								import log from './log.mjs';
								log();
							</code>
						</pre>
						<aside class="notes">
							That's better. "import" and "export", just the way you like and all CommonJS, JSON, and C++ modules can be used with import. But still only on server side. And .mjs extension, yes.
						</aside>
					</section>
					<section>
						<h3>RequireJS AMD</h3>
						<pre class="no-borders">
							<code data-trim data-noescape>
								// File log.js
								define(['logModule'], function(){
								    // export (expose) foo for other modules
								    return {
								        log: function(){
								          console.log('Example of AMD module system');    
								      }
								    };
								 });

								// File index.js
								require(['log'], function (logModule) {
								  logModule.log();
								});
							</code>
						</pre>
						<aside class="notes">
							Kinda strange, don't you think? It work only with RequireJS lib, but works. You may even want to use this lib on your NodeJS server, that's complitely possible.
						</aside>
					</section>
					<section>
						<h2>What will we do?</h2>
					</section>
				</section>
				<section>
					<section>
						<h2>Node package manager</h2>
						<img class="no-borders" src="https://cdn-images-1.medium.com/max/1600/0*A47ZVKudfCOCBbyx.png" >
					</section>
					<section>
						<img class="no-borders" src="images/mostInstalled.png">
					</section>
					<section>
						<h2>So, what will we do with our modules problem?</h2>
						<p>
							Transpile, Bundle, Build and Deloy. 
						</p>
						<p>
							If you want to know details, please, visit 
						</p>
						<p>
							<a href="https://medium.freecodecamp.org/anatomy-of-js-module-systems-and-building-libraries-fadcd8dbd0e">Free Code Camp</a>
						</p>
					</section>
				</section>
				<section>
					<h2>NodeJS in a nutshell</h2>
					<ul>
						<li>Open source & cross-platform project</li>
						<li>Build on Chrome's JavaScript runtime environment</li>
						<li>Event driven & Non-blocking IO</li>
						<li>Single threaded</li>
						<li>Build in Async IO, HTTP/s, file-system etc</li>
						<li>Ability to do JavaScript on server</li>
						<li>Modules</li>
					</ul>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				history: true,
				multiplex: {
					// Example values. To generate your own, see the socket.io server instructions.
					secret: '15396013305188024098', // Obtained from the socket.io server. Gives this (the master) control of the presentation
					id: '3018993f0a5b1089', // Obtained from socket.io server
					url: 'http://localhost:1948' // Location of socket.io server
				},
				dependencies: [
					{ src: '//cdn.socket.io/socket.io-1.3.5.js', async: true },
					{ src: 'plugin/multiplex/master.js', async: true },
					{ src: 'plugin/multiplex/client.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
			Reveal.addEventListener('chart_trend_iframe', function() {
				var frameElement = document.getElementById("chart_trend");
				var frameDoc = frameElement.contentWindow.document || frameEle.contentDocument;

				frameDoc.getElementById("chart_trend").focus();
			} );
		</script>
	</body>
</html>
